"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
	return (mod && mod.__esModule) ? mod : { "default": mod };
};
var chroma_js_1 = __importDefault(require("chroma-js"));
module.exports = function (color, options) {
	if (options === void 0) { options = {}; }
	if (!color || typeof color !== 'string') {
		throw new Error('Please provide a valid "color" string parameter');
	}
	var colorChroma = chroma_js_1.default(color);
	var _a = options.name, name = _a === void 0 ? 'brand' : _a, _b = options.ui, ui = _b === void 0 ? false : _b, _c = options.uiMix, uiMix = _c === void 0 ? 0.2 : _c, _d = options.grayscale, grayscale = _d === void 0 ? false : _d, _e = options.grayscaleMix, grayscaleMix = _e === void 0 ? 0.03 : _e, _f = options.palette, palette = _f === void 0 ? {} : _f;
	function mix(baseColor, amount) {
		return chroma_js_1.default.mix(baseColor, colorChroma, amount, 'lab').hex();
	}
	function addToPalette(name, value) {
		if (!palette[name]) {
			palette[name] = value;
		}
	}
	function scalePalette(baseColor, suffixes, padding) {
		if (padding === void 0) { padding = 0.1; }
		var colorScale = chroma_js_1.default.scale(['white', baseColor, 'black']).padding(padding).colors(suffixes.length);
		var colorRange = {};
		suffixes.forEach(function (suffix, index) { return colorRange[suffix] = colorScale[index]; });
		return colorRange;
	}
	var colorScale = [100, 200, 300, 400, 500, 600, 700, 800, 900];
	addToPalette(name, scalePalette(colorChroma, colorScale));
	if (ui) {
		addToPalette('cta', scalePalette(colorChroma.set('hsl.h', '+150'), colorScale));
		addToPalette('info', scalePalette(mix('#3df', uiMix), colorScale));
		addToPalette('warning', scalePalette(mix('#fd0', uiMix), colorScale));
		addToPalette('success', scalePalette(mix('#3e4', uiMix), colorScale));
		addToPalette('danger', scalePalette(mix('#f34', uiMix), colorScale));
	}
	if (grayscale) {
		addToPalette('white', '#fff');
		addToPalette('black', mix('#000', grayscaleMix));
		addToPalette('transparent', 'transparent');
		addToPalette('gray', {
			100: mix('#fafafa', grayscaleMix),
			200: mix('#f2f2f2', grayscaleMix),
			300: mix('#e8e8e8', grayscaleMix),
			400: mix('#d5d5d5', grayscaleMix),
			500: mix('#aeaeae', grayscaleMix),
			600: mix('#808080', grayscaleMix),
			700: mix('#555555', grayscaleMix),
			800: mix('#373737', grayscaleMix),
			900: mix('#202020', grayscaleMix),
		});
	}
	return palette;
};
